# Mood Miner – Emotion Classifier with Empathetic LLM Chatbot

## 🌟 Overview
Mood Miner is a lightweight NLP pipeline that classifies user-written text by emotional tone and provides an empathetic chatbot response using Google's Gemini API. Built without any pretrained language models for emotion detection, it ensures privacy and performance on local machines.

## 🧠 Features
- Emotion detection from text (joy, sadness, fear, anger, love, surprise, neutral, mixed)
- Locally trained ML model using TF-IDF and Logistic Regression
- Gemini API integration for empathetic replies
- All suggestions, quotes, songs, and activities are generated by the LLM
- Secure API usage through environment variables

## 💾 How It Works
1. **Train** a local emotion classification model on a large, diverse dataset.
2. **Detect** the user's emotion in a text input using this model. If model confidence is low, returns 'neutral'.
3. **Send** the query + emotion to Gemini for an emotional, context-aware response. All suggestions are generated by the LLM.
4. **Respond** with a chat-like interface. If emotion is 'neutral', only echo the user query (no suggestions).

## 🔐 API Security
Place your Gemini API key in a `.env` file as:

```
GEMINI_API_KEY=your_api_key_here
```

**Important:** Only your API key should be in `.env`. Do not put code or .gitignore lines in `.env`.

Add `.env` to your `.gitignore` file (not in `.env`):
```
# .gitignore
.env
```

### 🔒 Security Best Practices
* **Never share your `.env` file or API key.**
* **Add `.env` to your `.gitignore` file:**
  See above for correct usage.
* **Always use environment variables for secrets.**
* **Do not hard-code API keys in code, notebooks, or scripts.**
* For extra protection, consider using secret management tools or encrypting environment files if sharing with collaborators.

## ▶️ Running the Notebook
Run `main.ipynb` to train and evaluate the model. Use `moodminerchatapp.py` with Streamlit for the chat interface.

## 📦 File Structure
```
mood_miner/
├── main.ipynb           # Modular code with commentary
├── MoodMiner.ipynb      # All-in-one executable notebook
├── moodminerchatapp.py  # Streamlit chat app (LLM suggestions only)
├── README.md            # Documentation
├── requirements.txt     # Dependencies
└── data/
    ├── train.txt        # Training set (semicolon-separated: text;emotion)
    ├── val.txt          # Validation set (semicolon-separated: text;emotion)
    └── test.txt         # Test set (semicolon-separated: text;emotion)
```

## 📘 Dataset

Download and split the dataset as:
- `train.txt`, `val.txt`, `test.txt` in the `data/` folder (tab-separated: text\temotion)
You can use the original Kaggle dataset or your own splits.

## 📌 Important Notes for GitHub
* Place `.env` in `.gitignore`
* NEVER hard-code `GEMINI_API_KEY`
* Use `python-dotenv` to safely manage secrets

## 🛠️ Setup Instructions

### 1. Create and Activate Virtual Environment
```bash
python -m venv .venv
source .venv/bin/activate       # or .venv\Scripts\activate on Windows
```

### 2. Install Dependencies
```bash
pip install --upgrade pip
pip install -r requirements.txt
python -m nltk.downloader stopwords punkt punkt_tab
python -m spacy download en_core_web_sm
```

### 3. Place Dataset
Download `emotions.csv` from Kaggle and place in `data/` folder.

### 4. Run Notebooks
- `main.ipynb`: Step-by-step modular pipeline (reads train.txt, val.txt, test.txt)
- `MoodMiner.ipynb`: Full pipeline + chat GUI

---

## 💬 Final Cell: Gemini Chat GUI with Local Emotion Detection
Use `moodminerchatapp.py` for a Streamlit-powered chat interface that detects emotion and responds empathetically using Gemini API. All suggestions are generated by the LLM.

---

## ✅ Final Output Summary
* `README.md`: Full documentation
* `main.ipynb`: Modular with inline comments, error handling, and code blocks
* `MoodMiner.ipynb`: Full executable version with GUI + Gemini integration
* `requirements.txt`: All required libraries
* Uses `.env` for secret safety
* Final cell: Streamlit GUI chat interface with emotion-based empathetic LLM responses (no local suggestions)
* Reads train.txt, val.txt, test.txt from data/ and uses robust preprocessing, evaluation, and visualizations
